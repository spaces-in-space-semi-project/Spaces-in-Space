<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Page</title>

</head>
<body>
    <div th:fragment="product">
        <main>
            <!-- Button Container -->
            <div class="button-container">
                <a th:href="@{/admin/product/productRegist}">
                    <button id="insert-button">상품등록</button>
                </a>
            </div>

            <!-- Search Container -->
            <div class="search-container">
                <input type="text" placeholder="검색..." />
                <button>검색</button>
            </div>

        <!--    <table>-->
        <!--        <tr>-->
        <!--            <th>상품코드</th>-->
        <!--            <th>상품카테고리</th>-->
        <!--            <th>상품명</th>-->
        <!--            <th>상품가격</th>-->
        <!--        </tr>-->
        <!--        <tr th:each="product : ${ productList }">-->
        <!--            <td th:text="${ product.productCode }"></td>-->
        <!--            <td th:text="${ product.categoryCode }"></td>-->
        <!--            <td th:text="${ product.productName }"></td>-->
        <!--            <td th:text="${ product.productPrice }"></td>-->
        <!--        </tr>-->
        <!--    </table>-->

            <div id="grid" style="margin-top: 20px;"></div>

            <script th:inline="javascript">
                let menuList = /*[[${ productList }]]*/ [];

                const grid = new tui.Grid({
                    el: document.getElementById('grid'),
                    data: menuList,
                    scrollX: false,
                    scrollY: false,
                    columns: [
                        {
                            header: '상품코드',
                            name: 'productCode'
                        },
                        {
                            header: '상품카테고리',
                            name: 'categoryCode'
                        },
                        {
                            header: '상품명',
                            name: 'productName',
                            sortable: true,
                            sortingType: 'desc'
                        },
                        {
                            header: '상품가격',
                            sortable: true,
                            name: 'productPrice'
                        }
                    ]
                });

                // 행 클릭 이벤트 처리
                grid.on('click', (ev) => {
                    const rowKey = ev.rowKey; // 클릭된 행의 키
                    const rowData = grid.getRow(rowKey); // 클릭된 행의 데이터 가져오기

                    // 상품 상세 페이지로 이동 (예: 상품코드를 기준으로 이동)
                    if (rowData && rowData.productCode) {
                        const detailUrl = `/admin/product/productDetail/${rowData.productCode}`; // 상세 페이지 URL 생성
                        window.location.href = detailUrl; // 해당 URL로 이동
                    }
                });
            </script>
        </main>

    </div>
</body>
</html>