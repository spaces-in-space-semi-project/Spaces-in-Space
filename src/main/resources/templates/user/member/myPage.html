<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <title>My Page</title>

    <style>
        /* Styling for individual buttons */
        .nav-btn {
            background-color: #35373c;  /* Blue background */
            color: white;               /* White text */
            border: none;               /* Remove default borders */
            padding: 5px 15px;         /* Padding inside the button */
            font-size: 14px;            /* Button text size */
            cursor: pointer;            /* Show pointer cursor on hover */
            border-radius: 8px;         /* Rounded corners */
            min-width: 180px; /* Minimum button width */
            text-align: center;
        }

        .nav-btn.active {
            background-color: #606465;  /* Highlight color for active button */
        }

        /* Button hover effect */
        .nav-btn:hover {
            background-color: #606465;  /* Darker blue on hover */
        }

        .form-container-review {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }

        .form-container{
            max-width: 350px;
            margin: 0 auto;
            padding: 20px;
        }

        .form-group {
            margin-bottom: 3px;
        }

        label {
            display: block;
            margin-bottom: 4px;
            font-size: 14px;
            text-align: left;
        }

        input, .btn {
            width: 100%;
            padding: 10px;
            margin-top: 4px;
            box-sizing: border-box;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .btn {
            background-color: #000000;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            padding: 5px 15px;
            /*margin-top: 12px;*/
        }

        button:hover {
            background-color: #4d7336;
        }

        .invalid-feedback {
            color: red;
            font-size: 0.8em;
            margin-top: 5px;
        }

        .update-form {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /*h4 {*/
        /*    text-align: center;*/
        /*}*/

        /* inquiry list css */
        .inquiry-table {
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .inquiry-table td {
            word-wrap: break-word;
            word-break: break-all;
        }

        .inquiry-table th, .inquiry-table td {
            padding: 15px;
            text-align: center;
            vertical-align: middle;
        }
        .inquiry-table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        .inquiry-table td:nth-child(2) {
            width: 500px;
            text-align: center;
        }
        .inquiry-table td:nth-child(3) {
            width: 200px;
        }

        .inquiry-table td:nth-child(4) {
            width: 200px;
        }

        .inquiry-table tr:hover {
            background-color: #f1f1f1;
            cursor: pointer;
        }

        /* 주문 정보 table css */
        .orderlist-table {
            width: 60%;
            margin: 0 auto;
        }

        /*.orderlist-table th, .orderlist-table td {*/
        /*    padding: 15px;*/
        /*    text-align: center;*/
        /*    vertical-align: middle;*/
        /*}*/

        .orderlist-table td:nth-child(1) {
            width: 400px;
            text-align: center;
        }

        .orderlist-table td:nth-child(2) {
            width: 400px;
            text-align: center;
        }

        /* cart-table css */
        .cart-table {
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .cart-table td {
            word-wrap: break-word;
            word-break: break-all;
        }

        .cart-table th, .cart-table td {
            padding: 15px;
            text-align: center;
            vertical-align: middle;
        }
        .cart-table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        .cart-table td:nth-child(1) {
            width: 350px;
        }
        .cart-table td:nth-child(2) {
            width: 250px;
        }
        .cart-table td:nth-child(3) {
            width:130px;
        }

        .cart-table td:nth-child(4) {
            width:120px;
        }

        .cart-table td:nth-child(5) {
            width:120px;
        }

        .cart-table td:nth-child(6) {
            width:150px;
        }
        .cart-table tr:hover {
            background-color: #f1f1f1;
            cursor: pointer;
        }

        .review-table {
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .review-table td {
            word-wrap: break-word;
            word-break: break-all;
        }

        .review-table th, .review-table td {
            padding: 15px;
            text-align: center;
            vertical-align: middle;
        }
        .review-table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        .review-table tr:hover {
            background-color: #f1f1f1;
            cursor: pointer;
        }

        /* inquiry regist, detail css*/
        .form-container-inquiry {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }

        /* reply container css */
        /*.reply-container {*/
        /*    margin-top: 20px;*/
        /*    padding: 15px;*/
        /*    border: 1px solid #28a745;*/
        /*    border-radius: 5px;*/
        /*    background-color: #e9f7ef;*/
        /*}*/

        .reply-container {
            padding: 10px;
            border: 1px solid #28a745;
            border-radius: 5px;
            width: 100%; /* 필요에 따라 너비를 조정 */
            word-wrap: break-word; /* 너무 긴 단어가 있을 때 자동 줄바꿈 처리 */
            text-align: left;
        }

        .order-detail-1 {
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .order-detail-1 td {
            word-wrap: break-word;
            word-break: break-all;
        }

        .order-detail-1 th, .order-detail-1 td {
            padding: 15px;
            text-align: center;
            vertical-align: middle;
        }
        .order-detail-1 th {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        .order-detail-1 td:nth-child(1) {
            width: 25%;
            text-align: center;
        }

        .order-detail-1 td:nth-child(2) {
            width: 10%;
            text-align: center;
        }
        .order-detail-1 td:nth-child(3) {
            width: 20%;
        }

        .order-detail-1 td:nth-child(4) {
            width: 15%;
        }

        .order-detail-1 tr:hover {
            background-color: #f1f1f1;
            cursor: pointer;
        }

        .order-detail-1 {
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .order-detail-1 td {
            word-wrap: break-word;
            word-break: break-all;
        }

        .order-detail-1 th, .order-detail-1 td {
            padding: 15px;
            text-align: center;
            vertical-align: middle;
        }
        .order-detail-1 th {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        .order-detail-1 td:nth-child(1) {
            width: 25%;
            text-align: center;
        }

        .order-detail-1 td:nth-child(2) {
            width: 10%;
            text-align: center;
        }
        .order-detail-1 td:nth-child(3) {
            width: 20%;
        }

        .order-detail-1 td:nth-child(4) {
            width: 15%;
        }

        .order-detail-1 tr:hover {
            background-color: #f1f1f1;
            cursor: pointer;
        }

        /* 리뷰 별점 css */
        .star-rating {
            direction: rtl;
            display: inline-flex;
            gap: 5px; /* Adjust this value to control spacing between stars */
            font-size: 1rem;
            align-items: flex-start;
        }

        .star-rating input {
            display: none;
        }

        .star-rating label {
            color: #ddd;
            cursor: pointer;
            transition: color 0.3s ease;
            font-size: 1.5rem !important;
        }

        .star-rating input:checked ~ label {
            color: #ffc700;
        }

        .star-rating label:hover,
        .star-rating label:hover ~ label {
            color: #ffc700;
        }

        .review-list-star-rating {
            direction: ltr;
            display: inline-flex;
            gap: 5px; /* Adjust this value to control spacing between stars */
            font-size: 1rem;
            align-items: flex-start;
        }

        .review-list-star-rating .filled-star {
            color: #ffc700; /* Filled stars color */
        }

        .review-list-star-rating .empty-star {
            color: #ddd; /* Empty stars color */
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const activeSection = document.body.dataset.activeSection;
            console.log(activeSection); // Move the log inside the event listener
            if (activeSection) {
                const activeElement = document.querySelector(`[data-target="${activeSection}"]`);
                if (activeElement) {
                    activeElement.classList.add('active');
                } else {
                    console.error(`No element found with data-target="${activeSection}"`);
                }
            }
        });

        const message = `[[${message}]]`;
        if (message) {
            alert(message);
        }
    </script>
</head>
<body th:attr="data-active-section=${activeSection}">
<div th:replace="fragments/header :: header"></div>

<br>
<!--<h4>안녕하세요, <span th:text="${memberName}"></span>님</h4>-->

<nav class="mypage-nav-buttons">
    <a th:href="@{/user/member/update}" class="nav-btn" data-target="update">UPDATE DATA</a>
    <a th:href="@{/user/cart/cartList}" class="nav-btn" data-target="cart">MY CART</a>
    <a th:href="@{/user/pay/payList}" class="nav-btn" data-target="order">MY ORDER</a>
    <a th:href="@{/user/review/list}" class="nav-btn" data-target="review">MY REVIEW</a>
    <a th:href="@{/user/inquiry/list}" class="nav-btn" data-target="inquiry">INQUIRY</a>
    <a th:href="@{#}" class="nav-btn" onclick="deleteAccount()" data-target="delete">DELETE ACCOUNT</a>

</nav>

<main>
    <div th:switch="${activeSection}">
        <div th:case="'update'" th:include="user/member/update :: update"></div>
        <div th:case="'inquiry'" th:include="user/inquiry/list :: inquiry"></div>
        <div th:case="'inquiryRegist'" th:include="user/inquiry/regist :: inquiryRegist"></div>
        <div th:case="'inquiryDetail'" th:include="user/inquiry/detail :: inquiryDetail"></div>
        <div th:case="'order'" th:include="user/pay/payList :: order"></div>
        <div th:case="'cart'" th:include="user/cart/cartList :: cart"></div>
        <div th:case="'orderDetail'" th:include="user/pay/findPayDetail :: orderDetail"></div>
        <div th:case="'review'" th:include="user/review/list :: review"></div>
        <div th:case="'reviewRegist'" th:include="user/review/regist :: reviewRegist"></div>
        <div th:case="'reviewDetails'" th:include="user/review/detail :: reviewDetails"></div>
        <form id="deleteAccountForm" th:action="@{/user/member/delete}" method="post" style="display: none;">
            <input type="hidden" name="_method" value="delete">
        </form>
    </div>
</main>

<div th:replace="fragments/footer :: footer"></div>

<script th:inline="javascript">
    function deleteAccount() {
        if (confirm('가입한 정보가 모두 삭제됩니다. 회원 탈퇴를 진행하시겠습니까?')) {
            document.getElementById('deleteAccountForm').submit();
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('updateForm');
        const submitButton = document.getElementById('updateSubmitButton');

        // Add event listener for form submission
        form.addEventListener('submit', function(event) {
            // Trigger validation for each field
            Array.from(form.elements).forEach(input => {
                if (!input.checkValidity()) {
                    input.classList.add('is-invalid');
                } else {
                    input.classList.remove('is-invalid');
                    input.classList.add('is-valid');
                }
            });

            // Prevent submission if form is invalid
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            } else {
                form.classList.add('was-validated');
            }
        });

        // Reset validation states on input change
        form.addEventListener('input', function(event) {
            const input = event.target;
            if (input.checkValidity()) {
                input.classList.remove('is-invalid');
                input.classList.add('is-valid');
            } else {
                input.classList.remove('is-valid');
                input.classList.add('is-invalid');
            }
        });
    });
</script>
</body>
</html>
