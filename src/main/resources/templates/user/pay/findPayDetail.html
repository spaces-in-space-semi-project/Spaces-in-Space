<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}">Spaces in Space</title>
</head>

<body>
<div th:fragment="orderDetail">
    <main>
        <h2>결제 상세 정보</h2>

        <!--pay_detail_tbl 에 장바구니에 담긴 품목들이 개수만큼 추가되어야하는데 추가가 안되고 있음. 표기 오류로 잠시 주석.-->
<!--        <div th:each="payDetail : ${payDetailList}">-->
<!--            <p>상품 이름: <span th:text="${payDetail.productName}"></span></p>-->
<!--            <p>상품 수량: <span th:text="${payDetail.payDetailCnt}"></span></p>-->
<!--            <p>상품 가격: <span th:text="${payDetail.payDetailPrice}"></span></p>-->
<!--            <hr>-->
<!--        </div>-->
        <form th:action="@{/user/pay/delete/{payCode}(payCode=${findPayDetail.payCode})}" method="post" onsubmit="return confirmCancel()">
        <div>
            <p>주문 날짜: <span th:text="${findPayListByCode[0].payDate}"></span></p>
            <p>배송자명: <span th:text="${findPayListByCode[0].payReceiver}"></span></p>
            <p>배송받을 연락처: <span th:text="${findPayListByCode[0].payDeliverPhone}"></span></p>
            <p>주문 결제 상태: <span th:text="${findPayListByCode[0].payRefundYn}"></span></p>
            <p>주문 결제 수량: <span th:text="${findPayListByCode[0].payTotalCnt}"></span></p>
            <p>주문 결제 금액: <span th:text="${findPayListByCode[0].payTotalPrice}"></span></p>
            <p>배송 상태: <span th:text="${findPayListByCode[0].payDeliverStatus}"></span></p>
            <p>은행명: <span th:text="${findPayDetail.bankName}"></span></p>
            <p>계좌번호: <span th:text="${findPayDetail.payAccountNumber}"></span></p>
            <p>카드사명: <span th:text="${findPayDetail.cardCompanyName}"></span></p>
            <p>카드번호: <span th:text="${findPayDetail.payCardNumber}"></span></p>
        </div>
        <!-- 배송 상태가 '배송전'일 경우에만 주문 취소 버튼을 보이도록 설정 -->
        <button type="submit" th:if="${findPayDetail.payDeliverStatus == '배송전'}">주문취소</button>
        </form>
    </main>
    <script>
        function confirmCancel() {
            return confirm("주문을 취소하시겠습니까?");
        }
    </script>
</div>
</body>
</html>